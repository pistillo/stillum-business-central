# Global configuration
global:
  environment: development
  domain: stillum.local
  imageRegistry: docker.io

# Registry API
registryApi:
  enabled: true
  replicaCount: 2
  image:
    repository: stillum/registry-api
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8080
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  env:
    LOG_LEVEL: INFO
    QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION: validate

# Publisher Service
publisher:
  enabled: true
  replicaCount: 2
  image:
    repository: stillum/publisher
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8080
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  env:
    LOG_LEVEL: INFO
    QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION: validate

# Runtime Gateway
runtimeGateway:
  enabled: true
  replicaCount: 2
  image:
    repository: stillum/runtime-gateway
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8080
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  env:
    LOG_LEVEL: INFO
    QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION: validate

# Portal UI
portalUi:
  enabled: true
  replicaCount: 1
  image:
    repository: stillum/portal-ui
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 80
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    hosts:
      - host: portal.stillum.local
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: stillum-portal-tls
        hosts:
          - portal.stillum.local

# Database
database:
  type: postgresql
  host: postgres
  port: 5432
  user: stillum
  password: stillum123
  ssl: false
  pools:
    registryApi:
      name: stillum_registry
      size: 10
    publisher:
      name: stillum_publisher
      size: 10
    gateway:
      name: stillum_gateway
      size: 10

# Storage
storage:
  type: s3
  bucket: stillum-bundles
  endpoint: minio.stillum.svc.cluster.local:9000
  useSSL: false
  credentials:
    accessKey: minioadmin
    secretKey: minioadmin

# Temporal
temporal:
  enabled: true
  server:
    host: temporal.temporal.svc.cluster.local
    port: 7233
  database:
    type: postgresql
    host: postgres
    port: 5432
    user: stillum
    password: stillum123
    dbName: stillum_temporal

# Configuration
config:
  loglevel: INFO
  timezone: UTC
  language: en
  maxUploadSize: 104857600 # 100MB
  tokenExpiry: 3600 # 1 hour
  sessionTimeout: 1800 # 30 minutes

# Security
security:
  keycloak:
    enabled: true
    realm: stillum
    serverUrl: https://keycloak.stillum.local
    publicClient: stillum-portal
    internalServerUrl: http://keycloak:8080
  cors:
    enabled: true
    allowedOrigins:
      - "https://portal.stillum.local"
      - "http://localhost:3000"

# Monitoring
monitoring:
  enabled: false
  prometheus:
    enabled: false
  jaeger:
    enabled: false

# Backup
backup:
  enabled: false
  schedule: "0 2 * * *"
  retention: 30
