quarkus.http.port=8082

quarkus.datasource.db-kind=postgresql
%dev.quarkus.datasource.username=${POSTGRES_USER:stillum}
%dev.quarkus.datasource.password=${POSTGRES_PASSWORD:stillum123}
%dev.quarkus.datasource.jdbc.url=jdbc:postgresql://${POSTGRES_HOST:localhost}:5432/${POSTGRES_DB:stillumdb}

%prod.quarkus.datasource.username=${POSTGRES_USER}
%prod.quarkus.datasource.password=${POSTGRES_PASSWORD}
%prod.quarkus.datasource.jdbc.url=jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT:5432}/${POSTGRES_DB}

quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

quarkus.flyway.migrate-at-start=true
quarkus.flyway.locations=db/migration

%dev.quarkus.s3.endpoint-override=http://${MINIO_HOST:localhost}:9000
quarkus.s3.path-style-access=true
quarkus.s3.aws.region=us-east-1
%dev.quarkus.s3.aws.credentials.type=static
%dev.quarkus.s3.aws.credentials.static-provider.access-key-id=${MINIO_ROOT_USER:minioadmin}
%dev.quarkus.s3.aws.credentials.static-provider.secret-access-key=${MINIO_ROOT_PASSWORD:minioadmin}

stillum.storage.artifacts-bucket=stillum-artifacts
stillum.storage.bundles-bucket=stillum-bundles

%test.quarkus.flyway.migrate-at-start=true
%test.quarkus.datasource.devservices.enabled=false
%test.quarkus.datasource.username=${POSTGRES_USER:stillum}
%test.quarkus.datasource.password=${POSTGRES_PASSWORD:stillum123}
%test.quarkus.datasource.jdbc.url=jdbc:postgresql://${POSTGRES_HOST:localhost}:5432/${POSTGRES_DB:stillumdb}

%test.quarkus.s3.devservices.enabled=false
%test.quarkus.s3.path-style-access=true
%test.quarkus.s3.endpoint-override=http://${MINIO_HOST:localhost}:9000
%test.quarkus.s3.aws.credentials.type=static
%test.quarkus.s3.aws.credentials.static-provider.access-key-id=${MINIO_ROOT_USER:minioadmin}
%test.quarkus.s3.aws.credentials.static-provider.secret-access-key=${MINIO_ROOT_PASSWORD:minioadmin}

stillum.storage.bundle-no-overwrite=true

# --- CORS ---
quarkus.http.cors=true
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization
quarkus.http.cors.access-control-allow-credentials=true
%dev.quarkus.http.cors.origins=http://localhost:5173
%prod.quarkus.http.cors.origins=${CORS_ORIGINS:http://localhost:3000}

# --- NPM Build Service ---
quarkus.rest-client.npm-build-service.url=http://${NPM_BUILD_SERVICE_HOST:localhost}:${NPM_BUILD_SERVICE_PORT:8090}
quarkus.rest-client.npm-build-service.scope=jakarta.enterprise.context.ApplicationScoped

# --- RLS ---
stillum.rls.assume-role=${STILLUM_RLS_ROLE:stillum_app}
